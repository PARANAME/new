<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport"
         content="width=device-width, initial-scale=1.0">
        <title>Sample App</title>

        <%- include ("../partials/header.ejs") %>

    </head>
    <body>
        <%- include ("../partials/nav.ejs") %>

        <div class="container mb-2">
            <div class="row">
                <p id="Messages">Select Players and Order <%= Order %></p>
            </div>
            <div class="table-responsive">
            <table class="table table-striped table-bordered table-hover mb-4">
                <thead class="thead-light">
                    <tr>
                        <th scope="col">Name</th>
                        <th scope="col">1</th>
                        <th scope="col">2</th>
                        <th scope="col">3</th>
                        <th scope="col">4</th>
                        <th scope="col">5</th>
                        <th scope="col">6</th>
                        <th scope="col">7</th>
                        <th scope="col">8</th>
                        <th scope="col">9</th>
                        <th scope="col">10</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th scope="row">見出しセル</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <th scope="row">見出しセル</th>
                    </tr>
                    <tr>
                        <th scope="row">見出しセル</th>
                    </tr>
                </tbody>
            </table>
            </div>
            <div class="row mb-2">
                <div class="col-8">
                </div>
                <div class="col">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                        <label class="form-check-label" for="flexCheckDefault">
                          Side Shot
                        </label>
                    </div>    
                </div>
                <div class="col">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="flexCheckChecked">
                        <label class="form-check-label" for="flexCheckChecked">
                          9 Ball
                        </label>
                      </div>                        
                </div>
            </div>

            <div class="row mb-2">
                <div class="col-2">
                    <div class="card">
                    <div class="card-header text-nowrap p-1 text-center">
                        HARA
                    </div>
                    <img src="icon_hara2.png" class="img-fluid">
                    </div>
                </div>  
                <div class="col" id='score_1_1'>  
                </div>
              
                <div class="col" id='score_1_2'>
                </div>
              
                <div class="col" id='score_1_3'>
                </div>
        
                <div class="col" id='score_1_4'>
                </div>

                <div class="col" id='score_1_5'>
                </div>

                <div class="col">
                    <div class="rounded d-flex align-items-center justify-content-center">
                        <button class="btn btn-success btn-circle m-1" id="1">point</button>
                    </div>
                    <!--<input type="button" class="btn btn-secondary" value="Select" onclick="player_select();">-->
                </div>  
            </div>

            <div class="row mb-2">
                <div class="col-2">
                    <div class="card">
                    <div class="card-header text-nowrap p-1 text-center">
                        KIMURA
                    </div>
                    <img src="icon_kimura3.png" class="img-fluid">
                    </div>
                </div>  
                <div class="col">  
                </div>
              
                <div class="col">
                </div>
              
                <div class="col">
                </div>
        
                <div class="col">
                </div>

                <div class="col">
                    <div class="rounded d-flex align-items-center justify-content-center">
                        <button class="btn btn-success btn-circle m-1"><i class="fa fa-check">point</i></button>
                    </div>
                    <!--<input type="button" class="btn btn-secondary" value="Select" onclick="player_select();">-->
                </div>  
            </div>
            <div class="row mb-2">
                <div class="col-2">
                    <div class="card">
                    <div class="card-header text-nowrap p-1 text-center">
                        HARA
                    </div>
                    <img src="icon_hara2.png" class="img-fluid">
                    </div>
                </div>  
                <div class="col">  
                </div>
              
                <div class="col">
                </div>
              
                <div class="col">
                </div>
        
                <div class="col">
                </div>

                <div class="col">
                    <div class="rounded d-flex align-items-center justify-content-center">
                        <button class="btn btn-success btn-circle m-1"><i class="fa fa-check">point</i></button>
                    </div>
                    <!--<input type="button" class="btn btn-secondary" value="Select" onclick="player_select();">-->
                </div>  
            </div>
            <div class="row mb-2">
                <div class="col-8">
                </div>
                <div class="col">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                        <label class="form-check-label" for="flexCheckDefault">
                          Break Run Out
                        </label>
                    </div>    
                </div>
                <div class="col">
                    <form method="post" action="/game">
                        <input type="hidden" name="order" value="1_4_3_2"> 
                        <input type="submit" value="Next Round" class="btn btn-primary">
                    </form>
                 </div>
            </div>
            <div class="text-right">
            <form method="post" action="/game">
                <input type="hidden" name="order" value="1_4_3_2"> 
                <input type="submit" value="Change Order" class="btn btn-danger CO">
            </form>
            </div>
        </div>
        <script>
            var count = 1;
            var point = 0;
            var overpoint = 0;
            var Order = [];
            var takeover = "<%= Order %>";
            var takeoverOrder = takeover.split('_');

            if ( typeof takeover === "undefined"){
                alert(takeoverOrder[1]);
            }
            $('.btn-circle').on('click', function(){

              var obj = event.target;
              alert(obj);
              var st = 'score_'+obj.id.toString()+'_'+count.toString();
//              $('.'+st).attr('src', count+'.png');

              alert(st);
              if (count < 5){
                document.getElementById(st).innerHTML = '<img src="'+getscoredraw(1)+'" class="img-fluid">';
              } else {
                overpoint +=1;
                document.getElementById('score_1_5').innerHTML = '<h4> + '+overpoint+'</h4>';
              }

              count += 1;
            });

            function getscoredraw(point) {
                var RandInt = Math.floor(Math.random() * 3)+1;
                return 'single_' + RandInt.toString() + '.png';
            }

        </script>
    </body>
</html>